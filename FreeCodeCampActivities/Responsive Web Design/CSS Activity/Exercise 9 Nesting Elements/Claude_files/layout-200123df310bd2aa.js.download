(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{2781:function(e,t,n){Promise.resolve().then(n.bind(n,65739)),Promise.resolve().then(n.bind(n,11932)),Promise.resolve().then(n.bind(n,46213)),Promise.resolve().then(n.bind(n,10040)),Promise.resolve().then(n.bind(n,98848)),Promise.resolve().then(n.bind(n,85598)),Promise.resolve().then(n.bind(n,31708)),Promise.resolve().then(n.bind(n,22300)),Promise.resolve().then(n.bind(n,24411)),Promise.resolve().then(n.bind(n,40604)),Promise.resolve().then(n.bind(n,85575)),Promise.resolve().then(n.bind(n,61501)),Promise.resolve().then(n.t.bind(n,7697,23)),Promise.resolve().then(n.t.bind(n,75124,23)),Promise.resolve().then(n.t.bind(n,15109,23)),Promise.resolve().then(n.t.bind(n,16416,23)),Promise.resolve().then(n.bind(n,16627)),Promise.resolve().then(n.bind(n,10737)),Promise.resolve().then(n.t.bind(n,10623,23))},65739:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Toasts}});var r=n(58882),i=n(27573);n(21032);var o=n(45440);function Notification(e){let{children:t}=e;return(0,i.jsx)("div",{className:"flex max-w-lg justify-self-right z-50 bg-white border border-stone-200 rounded-xl shadow-lg",children:(0,i.jsx)("div",{className:"flex flex-row text-left text-sm py-4 px-3",children:t})})}var s=n(5910),u=n(61573),a=n(78230),c=n(5440),l=n(58943);function _templateObject(){let e=(0,r._)(["\n  from {\n    opacity: 1;\n  }\n  to {\n    opacity: 0;\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,r._)(["\n  from {\n    transform: translateX(calc(100% + var(--viewport-padding)));\n  }\n  to {\n    transform: translateX(0);\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){let e=(0,r._)(["\n  from {\n    transform: translateX(var(--radix-toast-swipe-end-x));\n  }\n  to {\n    transform: translateX(calc(100% + var(--viewport-padding)));\n  }\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){let e=(0,r._)(['\n  --viewport-padding: 1rem;\n\n  display: flex;\n  justify-content: flex-end;\n\n  &[data-state="open"] {\n    animation: ',' 200ms cubic-bezier(0.16, 1, 0.3, 1) forwards;\n  }\n  &[data-state="closed"] {\n    animation: ',' 200ms ease-in forwards;\n  }\n  &[data-swipe="move"] {\n    transform: translateX(var(--radix-toast-swipe-move-x));\n  }\n  &[data-swipe="cancel"] {\n    transform: translateX(0);\n    transition: transform 200ms ease-out;\n  }\n  &[data-swipe="end"] {\n    animation: '," 100ms ease-out;\n  }\n"]);return _templateObject3=function(){return e},e}let Toasts_Notification=e=>{let t,{toast:n}=e,{message:r,toastType:o}=n;switch(o){case"error":t=(0,i.jsxs)("div",{className:"flex flex-row gap-2 text-red-500 items-center",children:[(0,i.jsx)("div",{children:(0,i.jsx)(s.Z,{size:18})}),(0,i.jsx)(c.Dx,{children:"string"==typeof r?(0,i.jsx)("p",{children:r}):r}),(0,i.jsx)(c.x8,{children:(0,i.jsx)(u.Z,{size:18})})]});break;case"success":t=(0,i.jsxs)("div",{className:"flex flex-row gap-2 text-green-500 items-center",children:[(0,i.jsx)("div",{children:(0,i.jsx)(a.Z,{size:18})}),(0,i.jsx)(c.Dx,{children:"string"==typeof r?(0,i.jsx)("p",{children:r}):r}),(0,i.jsx)(c.x8,{children:(0,i.jsx)(u.Z,{size:18})})]})}return(0,i.jsx)(Notification,{children:t})};function Toasts(){let{toasts:e,clearToast:t}=(0,o.e)();return(0,i.jsxs)(c.zt,{swipeDirection:"right",label:"Error",children:[e.map(e=>{let{id:n}=e;return(0,i.jsx)(c.fC,{asChild:!0,duration:1e4,onOpenChange:e=>{e||setTimeout(()=>{t(n)},200)},children:(0,i.jsx)(h,{children:(0,i.jsx)(Toasts_Notification,{toast:e})})},n)}),(0,i.jsx)(c.l_,{className:"fixed top-0 right-0 p-4 z-20 flex flex-col gap-4"})]})}let d=(0,l.F4)(_templateObject()),f=(0,l.F4)(_templateObject1()),m=(0,l.F4)(_templateObject2()),h=l.zo.li(_templateObject3(),f,d,m)},16627:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Providers}});var r=n(27573),i=n(71036),o=n(34063),s=n(7653),u=n(58372),a=n(93352),c=n(22809),l=n(45440),d=n(38348),f=n(99865),m=n(159),h=n(26460),p=n(19619),v=n(10040),g=n(11932),x=n(72623);function query_client_QueryClientProvider(e){let{state:t,children:n}=e,{addError:i}=(0,l.e)(),[o]=(0,s.useState)(()=>{let onError=(e,t,n)=>{if(e instanceof d.Hx&&403===e.statusCode&&e.message.includes("Not authenticated")){let e=o.getQueryData([f.aY]);(null==e?void 0:e.success)&&o.invalidateQueries([f.aY])}else if(e instanceof Error)("function"==typeof t?t(e):t)||(n?i(n):i(e));else throw Error("Unexpected query error type: ".concat(typeof e),{cause:e})};return new m.S({queryCache:new h.t({onError:(e,t)=>{var n,r;return onError(e,null===(n=t.meta)||void 0===n?void 0:n.noToast,null===(r=t.meta)||void 0===r?void 0:r.errorMessage)}}),mutationCache:new p.L({onError:(e,t,n,r)=>{var i,o;return onError(e,!!(null===(i=r.meta)||void 0===i?void 0:i.noToast),null===(o=r.meta)||void 0===o?void 0:o.errorMessage)}})})});return(0,r.jsx)(x.F,{children:(0,r.jsx)(v.QueryClientProvider,{client:o,children:(0,r.jsx)(g.Hydrate,{state:t,children:n})})})}var b=n(19159),y=n.n(b),w=n(83127),_=n(86211);let P={disableAutoMetricsLogging:!0,environment:{tier:"production"},api:"https://statsig.anthropic.com/v1/"};function StatsigProvider(e){let{children:t}=e,{statsigClientKey:n}=(0,a.mX)(),{account:i,activeOrganization:o}=(0,c.t)(),s=(0,c.ZJ)(),{data:u}=(0,_.WE)("/api/account/statsig/".concat(null==o?void 0:o.uuid),{queryKey:[f.eW,null==o?void 0:o.uuid],enabled:!!o,meta:{noToast:!0}}),l=(null==u?void 0:u.user)||(null==i?void 0:i.statsig.user);l&&(l.custom={...l.custom,isPro:s});let d=(null==u?void 0:u.values)||(null==i?void 0:i.statsig.values);if(l&&(!d||0===Object.keys(d).length))throw Error("no statsig values for user");return(0,r.jsx)(StatsigStaticProvider,{sdkKey:n,user:l,values:d,options:P,children:t})}function StatsigStaticProvider(e){let{children:t,sdkKey:n,user:i,options:o,values:u}=e,[a,c]=(0,s.useReducer)(e=>e+1,0),l=(0,s.useRef)(!0);(0,s.useState)(()=>w.Statsig.bootstrap(n,u||{},i,o)),(0,s.useEffect)(()=>{if(l.current){l.current=!1,window.__STATSIG_SDK__=w.Statsig,window.__STATSIG_JS_SDK__=y(),window.__STATSIG_RERENDER_OVERRIDE__=()=>{c()};return}i&&u&&(w.Statsig.updateUserWithValues(i,u),c())},[i,u]),(0,s.useEffect)(()=>(w.Statsig.setReactContextUpdater(()=>c()),()=>{w.Statsig.setReactContextUpdater(null)}),[]);let d=w.Statsig.initializeCalled(),f=(0,s.useMemo)(()=>({initialized:!0,statsigPromise:null,userVersion:a,initStarted:d,updateUser:()=>{}}),[a,d]);return(0,r.jsx)(w.StatsigContext.Provider,{value:f,children:t})}var E=n(32859),j=n(58943);function StyledComponentsRegistry(e){let{children:t}=e,[n]=(0,s.useState)(()=>new j.qH);return(0,E.useServerInsertedHTML)(()=>{let e=n.getStyleElement();return n.instance.clearTag(),(0,r.jsx)(r.Fragment,{children:e})}),(0,r.jsx)(r.Fragment,{children:t})}let C="(prefers-color-scheme: dark)",S=(0,s.createContext)(void 0);function ThemeProvider(e){let{pathTheme:t,initialTheme:n,children:i}=e,[o,u]=(0,s.useState)(n),[a,c]=(0,s.useState)("light");(0,s.useEffect)(()=>{applyThemeOnDocument(t)},[t]),(0,s.useEffect)(()=>applyThemeOnDocument(o),[o]),(0,s.useEffect)(()=>applyModeOnDocument(a),[a]);let l=(0,s.useCallback)(()=>applyModeOnDocument(a),[a]);return(0,s.useEffect)(()=>{if("auto"!==a)return;let e=window.matchMedia(C);return e.addEventListener("change",l),()=>e.removeEventListener("change",l)},[a,l]),(0,r.jsx)(S.Provider,{value:{theme:o,mode:a,setMode:c,setTheme:u},children:i})}let applyThemeOnDocument=e=>{if("undefined"==typeof document)return;let t=document.documentElement;t.dataset.theme=e},applyModeOnDocument=e=>{if("undefined"==typeof document)return;let t=document.documentElement;t.dataset.mode=resolveMode(e)},resolveMode=e=>{var t;return"auto"!==e?e:(null===(t=window)||void 0===t?void 0:t.matchMedia(C).matches)?"dark":"light"},pathnameToTheme=e=>{let{pathname:t,loggedIn:n,isClaudeDot:r,workbenchEnabled:i}=e;return!r&&n&&i&&("/"===t||t.startsWith("/workbench")||t.startsWith("/account/")||t.startsWith("/dashboard"))?"console":"claude"};function PathThemeProvider(e){let{initialTheme:t,children:n}=e,i=(0,E.usePathname)(),{value:o}=(0,w.useGate)("console_workbench_enabled"),{account:s}=(0,c.t)(),u=(0,a.Zx)(),l=pathnameToTheme({pathname:i,loggedIn:!!s,isClaudeDot:u,workbenchEnabled:o});return(0,r.jsx)(ThemeProvider,{pathTheme:l,initialTheme:t,children:n})}function Providers(e){let{config:t,queryClientState:n,theme:d,children:f}=e;return(0,s.useEffect)(()=>{(0,i.yG)()||console.log("%c\n         &&&&&   &&&&&\n        &&&&&&&   &&&&&\n       &&&&&&&&&   &&&&&\n      &&&&  &&&&&   &&&&&\n     &&&&    &&&&&   &&&&&\n    &&&&&     &&&&&   &&&&&\n   &&&&&&&&&&&&&&&&&   &&&&&\n  &&&&&         &&&&&   &&&&&\n &&&&&           &&&&&   &&&&&\n\n We're hiring! https://anthropic.com/careers","font-family: Menlo, monospace; font-weight: bold; font-size: 14px; color: #cda177")},[]),(0,r.jsx)(a.Pc,{config:t,children:(0,r.jsx)(o.A,{reducedMotion:"user",children:(0,r.jsx)(l.i,{children:(0,r.jsx)(query_client_QueryClientProvider,{state:n,children:(0,r.jsx)(u.H,{appId:"lupk8zyo",children:(0,r.jsx)(StyledComponentsRegistry,{children:(0,r.jsx)(c.Q6,{children:(0,r.jsx)(StatsigProvider,{children:(0,r.jsx)(PathThemeProvider,{initialTheme:d,children:f})})})})})})})})})}},86211:function(e,t,n){"use strict";n.d(t,{Ne:function(){return useOptimisticApiMutation},WE:function(){return useApiQuery},uC:function(){return useApiMutation}});var r=n(38348),i=n(39547),o=n(40604),s=n(61501),u=n(10040),a=n(7653),c=n(72623);function useFetch(e){let{setUpdateType:t}=(0,c.m)();return(0,a.useCallback)(async(n,o)=>{let s=await fetch(n,{...o,headers:{"anthropic-client-sha":"405ee5562c871142f58392b80c90597a313e5487","anthropic-client-version":"1",...o.headers}}),u=s.headers.get("anthropic-client-update");u&&["prompt","force"].includes(u)&&t(u);let a=await s.text(),c={error:{type:"api_error",message:a}};try{("DELETE"!==o.method||a.length>0)&&(c=JSON.parse(a))}catch(e){(0,i.uT)("Got invalid JSON from NextJS response",{extra:{text:a,status:s.status}})}if(!s.ok)throw(0,r.fT)(s.status,c,e);return c},[e,t])}let useApiMutation=(e,t,n)=>{let{transformVariables:r,enabled:i=!0,...s}=n||{},u=useFetch("Mutation error"),{mutate:c,...l}=(0,o.useMutation)({mutationFn:async n=>{let i;i="function"==typeof e?e(n):e;let o=r?r(n):n,s=await u(i,{method:t,headers:{"Content-Type":"application/json"},body:o?JSON.stringify(o):void 0});return s},...s}),d=(0,a.useCallback)(e=>{i&&c(e)},[c,i]);return{mutate:d,...l}},useApiQuery=(e,t)=>{let n=useFetch("Query error");return(0,s.useQuery)({queryKey:[e],queryFn:async()=>{let t=await n(e,{method:"GET",headers:{"Content-Type":"application/json"}});return t},retry:!1,...t})};function useOptimisticApiMutation(e,t,n,r){let i=(0,u.useQueryClient)(),{queryKey:o,...s}=r;return useApiMutation(e,t,{async onMutate(e){await i.cancelQueries({queryKey:o});let t=i.getQueryData(o);return i.setQueryData(o,t=>n(e,t)),{previousValue:t}},onError(e,t,n){(null==n?void 0:n.previousValue)&&i.setQueryData(o,n.previousValue)},...s})}},72623:function(e,t,n){"use strict";n.d(t,{F:function(){return ClientUpdateProvider},m:function(){return useClientUpdate}});var r=n(27573),i=n(71036),o=n(7653);let s=(0,o.createContext)(null),u="undefined"!=typeof navigator&&"serviceWorker"in navigator,getWorkbox=()=>"workbox"in window&&u?window.workbox:null,updateWorkbox=e=>{let run=async()=>{try{await e.update()}catch(e){}};run()};function ClientUpdateProvider(e){let{children:t}=e,[n,a]=(0,o.useState)(null);(0,o.useEffect)(()=>{(0,i.yG)()&&u&&(async()=>{let e=await navigator.serviceWorker.getRegistrations();0!==e.length&&(console.warn("Found ".concat(e.length," service worker(s). This was probably from running a production build at this origin. Unregistering.")),e.forEach(e=>void e.unregister()))})()},[]),(0,o.useEffect)(()=>{let e=getWorkbox();e&&n&&((async()=>{let e=await window.caches.keys();await Promise.all(e.map(e=>caches.delete(e)))})(),updateWorkbox(e))},[n]),(0,o.useEffect)(()=>{let e=getWorkbox();if(!e)return;let t=window.setInterval(()=>{updateWorkbox(e)},36e5);return()=>{window.clearInterval(t)}},[]);let c=(0,o.useMemo)(()=>({updateType:n,setUpdateType:a}),[n]);return(0,r.jsx)(s.Provider,{value:c,children:t})}function useClientUpdate(){let e=(0,o.useContext)(s);if(!e)throw Error("Must be called from within ClientUpdateProvider");return e}},93352:function(e,t,n){"use strict";n.d(t,{Pc:function(){return ConfigurationProvider},Zx:function(){return useIsClaudeDot},mX:function(){return useConfiguration}});var r=n(27573),i=n(7653);let o=(0,i.createContext)(void 0),ConfigurationProvider=e=>{let{config:t,children:n}=e;return(0,r.jsx)(o.Provider,{value:t,children:n})},useConfiguration=()=>{let e=(0,i.useContext)(o);if(!e)throw Error("useConfiguration must be called from within ConfigurationProvider");return e},useIsClaudeDot=()=>{let{applicationType:e}=useConfiguration();return"claude-dot"===e}},22809:function(e,t,n){"use strict";n.d(t,{IU:function(){return useUsagePaused},Q6:function(){return CurrentAccountProvider},ZJ:function(){return useHasProSubscription},oD:function(){return useCurrentAccountQuery},t:function(){return useCurrentAccount}});var r=n(27573),i=n(71036),o=n(99865),s=n(39547),u=n(44637),a=n.n(u),c=n(32859),l=n(7653),d=n(58372),f=n(86211),m=n(93352),h=n(19981);let p="lastActiveOrg",v=(0,l.createContext)(null),CurrentAccountProvider=e=>{let{children:t}=e,[n,o]=(0,l.useState)(),{data:u,isFetching:f,refetch:g}=useCurrentAccountQuery(),x=(0,h.K)();(0,l.useEffect)(()=>{if(!(null==u?void 0:u.success))return;let e=u.account;s.av({id:e.uuid});let t="none";for(let n of["commercial_use","claude_pro","api"])if(e.memberships.some(e=>e.organization.capabilities.includes(n))){t="commercial_use";break}x.identify(u.account.uuid,{plan:t})},[u,x]);let b=(0,c.usePathname)();(0,l.useEffect)(()=>{!(0,i.yG)()&&(null==u?void 0:u.success)&&b&&x.page(b)},[b,x,u]),(0,l.useEffect)(()=>{if(n)try{window.localStorage.setItem(p,n)}catch(e){}},[n]);let y=(0,d.o)();(0,l.useEffect)(()=>{!(0,i.yG)()&&(null==u?void 0:u.success)&&y.boot({hideDefaultLauncher:!0,userId:u.account.uuid,email:u.account.email_address,name:u.account.full_name,userHash:u.intercomAccountHash})},[y,u]);let w=(0,m.Zx)(),_=(0,c.useSearchParams)(),P=_.get("organization_id"),E=(0,l.useMemo)(()=>{let e;if(!(null==u?void 0:u.success))return;let t=w?"chat":"api",r=u.account.memberships.map(e=>e.organization).filter(e=>e.capabilities.includes(t));if(n){let e=r.find(e=>e.uuid===n);if(e)return e}if(P&&(e=r.find(e=>e.uuid===P)),!e)try{let t=window.localStorage.getItem(p);e=r.find(e=>e.uuid===t)}catch(e){}return e||(e=a()(r,"name")),e&&o(e.uuid),e},[u,n,P,w]);(0,l.useEffect)(()=>{E&&y.update({customAttributes:{paidAccount:E.capabilities.includes("commercial_use"),claudePro:E.capabilities.includes("claude_pro"),orgUUID:E.uuid,orgName:E.name,orgCapabilities:E.capabilities.join(",")}})},[y,E]);let j=(0,l.useMemo)(()=>({account:(null==u?void 0:u.success)?u.account:void 0,messageLimit:(null==u?void 0:u.success)&&E?u.messageLimits[E.uuid]:void 0,activeOrganization:E,setActiveOrganizationUUID:o,isLoading:f,isLoggedOut:!f&&(null==u?void 0:u.success)===!1,refetch:async()=>{var e;let t=await g();if(null===(e=t.data)||void 0===e?void 0:e.success)return t.data.account}}),[u,E,f,g]);return(0,r.jsx)(v.Provider,{value:j,children:t})},useCurrentAccountQuery=()=>(0,f.WE)("/api/auth/current_account",{queryKey:[o.aY],staleTime:1/0}),useCurrentAccount=()=>{let e=(0,l.useContext)(v);if(!e)throw Error("Must call inside CurrentAccountProvider");return e},useHasProSubscription=()=>{let{activeOrganization:e}=useCurrentAccount();return null==e?void 0:e.capabilities.includes("claude_pro")},useUsagePaused=()=>{let{activeOrganization:e}=useCurrentAccount();return null!=e&&!!e.billable_usage_paused_until&&new Date(e.billable_usage_paused_until)>new Date}},45440:function(e,t,n){"use strict";n.d(t,{e:function(){return useToasts},i:function(){return ErrorsProvider}});var r=n(27573),i=n(7653);let o=(0,i.createContext)(void 0);function ErrorsProvider(e){let{children:t}=e,n=(0,i.useRef)(1),[s,u]=(0,i.useState)([]),a=(0,i.useCallback)(e=>{u(t=>[...t,{id:n.current++,message:e instanceof Error?e.message:e,toastType:"error"}])},[]),c=(0,i.useCallback)(e=>{u(t=>[...t,{id:n.current++,message:e instanceof Error?e.message:e,toastType:"success"}])},[]),l=(0,i.useCallback)(e=>{u(t=>t.filter(t=>t.id!==e))},[]),d=(0,i.useMemo)(()=>({toasts:s,addError:a,addSuccess:c,clearToast:l}),[s,a,c,l]);return(0,r.jsx)(o.Provider,{value:d,children:t})}function useToasts(){let e=(0,i.useContext)(o);if(!e)throw Error("Must be called within ErrorsProvider");return e}},19981:function(e,t,n){"use strict";n.d(t,{K:function(){return useSegment}});var r=n(27376),i=n(93352);let o=null,useSegment=()=>{let{segmentKey:e,segmentCdnHost:t,segmentApiHost:n}=(0,i.mX)();return o||(o=r.b.load({writeKey:e,cdnURL:"https://".concat(t)},{disableClientPersistence:!0,integrations:{"Segment.io":{apiHost:"".concat(n,"/v1"),protocol:"https"}}})),o}},10737:function(e,t,n){"use strict";n.r(t),n.d(t,{SiftEvents:function(){return SiftEvents}});var r=n(32859),i=n(7653);let SiftEvents=()=>{let e=(0,r.usePathname)(),t=(0,i.useRef)(!0);return(0,i.useEffect)(()=>{if(t.current){t.current=!1;return}let e=window._sift;e&&e.push(["_trackPageview"])},[e]),null}},38348:function(e,t,n){"use strict";n.d(t,{Hx:function(){return APIError},fT:function(){return errorFromResponse}});let APIError=class APIError extends Error{constructor(e,t,n,r){super(e),this.type=t,this.statusCode=n,this.extra=r}};function errorFromResponse(e,t,n){if(t&&"object"==typeof t&&"error"in t){let n=t.error,{message:r,type:i,...o}=n;return new APIError(r,i,e,o)}return new APIError(n,"api_error",e,t||{})}},71036:function(e,t,n){"use strict";n.d(t,{yG:function(){return isDevelopment}}),n(68571);let isDevelopment=()=>!1},99865:function(e,t,n){"use strict";n.d(t,{BB:function(){return u},I_:function(){return s},L0:function(){return p},QU:function(){return d},RK:function(){return f},aY:function(){return i},dv:function(){return h},eW:function(){return l},mm:function(){return o},nM:function(){return r},ph:function(){return c},tv:function(){return a},xp:function(){return m}});let r="api_key_list",i="current_account",o="org",s="org_members",u="org_invites",a="chat_conversation_list",c="chat_conversation",l="account_statsig",d="subscription_details",f="invoice_list",m="workbench_list_prompts",h="workbench_get_prompt",p="workbench_list_revisions"},10623:function(){}},function(e){e.O(0,[4454,6378,1550,3127,9711,4637,8609,8259,1293,1362,3216,1744],function(){return e(e.s=2781)}),_N_E=e.O()}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2506],{63942:function(e,t,n){var r=n(27573),s=n(7653);let a=(0,s.forwardRef)((e,t)=>{let{className:n,children:a,disabled:i,onIsAtBottomChange:o}=e,l=(0,s.useRef)(0),c=(0,s.useRef)(!0),u=(0,s.useRef)(null),d=(0,s.useRef)(!0),m=(0,s.useCallback)(()=>{u.current&&c.current&&(u.current.scrollTop=u.current.scrollHeight)},[]);return(0,s.useImperativeHandle)(t,()=>({reset(){l.current=0,c.current=!0,m()},scrollToBottomIfPinned:m}),[m]),(0,s.useLayoutEffect)(()=>{!i&&a&&m()},[a,i,m]),(0,r.jsx)("div",{className:n,onScroll:e=>{if(i)return;let t=e.currentTarget.scrollTop,n=function(e,t){if(!e)return!1;{let n=e.scrollHeight-8;return Math.ceil(t+e.offsetHeight)>=Math.floor(n)}}(u.current,t);n!==d.current&&(d.current=n,null==o||o(n));let r=t>l.current;n&&r?c.current=!0:n||r||(c.current=!1),l.current=t},ref:u,children:a})});a.displayName="AutoScroll",t.Z=a},70095:function(e,t,n){n.d(t,{Z:function(){return ChatWarning}});var r=n(58882),s=n(27573),a=n(93352),i=n(22809),o=n(55616),l=n(61573),c=n(86211),u=n(99865);let useGetOrganization=e=>(0,c.WE)("/api/organizations/".concat(e),{queryKey:[u.mm,e],enabled:!!e,staleTime:3e4}),useDismissFlag=()=>{let{activeOrganization:e}=(0,i.t)(),t=null==e?void 0:e.uuid;return(0,c.Ne)(e=>{let{flagType:n}=e;return"/api/organizations/".concat(t,"/flags/").concat(n,"/dismiss")},"POST",(e,t)=>{let{flagType:n}=e;if(t)return{...t,active_flags:t.active_flags.filter(e=>e.type!==n)}},{queryKey:[u.mm,t]})};function _templateObject(){let e=(0,r._)(["\n  w-full\n  flex\n  gap-2\n  bg-warning-orange\n  px-3\n  py-2\n  ","\n"]);return _templateObject=function(){return e},e}let d=["consumer_restricted_mode","consumer_second_warning","consumer_first_warning"],LearnMore=e=>{let{long:t}=e;return(0,s.jsxs)("a",{className:"underline",href:"https://support.anthropic.com/en/articles/8106465-our-approach-to-user-safety",target:"_blank",rel:"noreferrer",children:["Learn more",t&&" about the types of prompts to avoid"," \xbb"]})},m={consumer_restricted_mode:{isDismissible:!1,content:(0,s.jsxs)(s.Fragment,{children:["Because a large number of your prompts have violated our Acceptable Use Policy, we have temporarily applied enhanced safety filters to your chats. ",(0,s.jsx)(LearnMore,{})]})},consumer_second_warning:{isDismissible:!0,content:(0,s.jsxs)(s.Fragment,{children:["It appears your recent prompts continue to violate our Acceptable Use Policy. If we continue seeing this pattern, we'll apply enhanced safety filters to your chats. ",(0,s.jsx)(LearnMore,{})]})},consumer_first_warning:{isDismissible:!0,content:(0,s.jsxs)(s.Fragment,{children:["It looks like a few of your recent prompts don't meet our Acceptable Use Policy. ",(0,s.jsx)(LearnMore,{long:!0})]})}};function ChatWarning(){let e=(0,a.Zx)(),{activeOrganization:t}=(0,i.t)(),{mutateAsync:n}=useDismissFlag(),{data:r}=useGetOrganization(null==t?void 0:t.uuid),o=null==r?void 0:r.active_flags.map(e=>e.type),c=d.findIndex(e=>null==o?void 0:o.includes(e));if(-1===c)return null;let u=d[c],{isDismissible:f,content:h}=m[u],handleDismiss=async()=>{if(!f)return;let e=[u];"consumer_second_warning"===u&&(null==o?void 0:o.includes("consumer_first_warning"))&&e.push("consumer_first_warning"),await Promise.all(e.map(e=>n({flagType:e})))};return(0,s.jsx)("div",{className:e?"sticky top-12 p-2":"",children:(0,s.jsx)(p,{$isFloating:e,children:(0,s.jsxs)("div",{className:"flex justify-between items-top",children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:h}),f&&(0,s.jsx)("button",{className:"h-5 cursor-pointer",onClick:()=>void handleDismiss(),children:(0,s.jsx)(l.Z,{size:24})})]})})})}let p=o.Z.div(_templateObject(),e=>e.$isFloating&&"max-w-3xl\n    mx-auto\n    rounded-md\n    shadow-element\n    z-50")},95892:function(e,t,n){n.d(t,{Z:function(){return FirstEmptyChatScreen}});var r=n(27573),s=n(96072),a=n.n(s);function FirstEmptyChatScreen(){return(0,r.jsxs)("figure",{className:"max-w-sm grid grid-cols-1 mx-auto text-center h-full place-content-center gap-2 inset-0 absolute","aria-hidden":!0,"data-testid":"empty-chat-screen",children:[(0,r.jsx)("span",{className:"font-styrene-display font-medium text-6xl tracking-tighter mb-2",children:"Claude"}),(0,r.jsx)("span",{className:"font-styrene font-medium tex-sm",children:"by"}),(0,r.jsx)(a(),{src:"/images/ant_logo_full.svg",width:108,height:12,className:"w-full max-h-3.5",alt:"Anthropic"})]})}},40047:function(e,t,n){n.d(t,{Z:function(){return FlexSpacer}});var r=n(27573);function FlexSpacer(){return(0,r.jsx)("div",{className:"w0 h0 flex-grow"})}n(7653)},84226:function(e,t,n){n.d(t,{Z:function(){return ChatMessage}});var r=n(58882),s=n(27573),a=n(22809),i=n(38338),o=n(55616),l=n(83078),c=n(7653),u=n(83127),d=n(63260),m=n(26890),p=n(1668),f=n(34063);function _templateObject(){let e=(0,r._)(["\n  w-full\n  aspect-square\n  rounded-full\n  bg-white\n  grid\n  place-items-center\n  overflow-hidden\n"]);return _templateObject=function(){return e},e}function ClaudeAvatar(e){let{loading:t,...n}=e,r=(0,d.c)(0),a=(0,c.useRef)(),i=(0,m.J)();return(0,c.useEffect)(()=>{if(!i){if(t)a.current=(0,p.j)(r,360,{repeat:1/0,repeatType:"loop",type:"spring",duration:2,bounce:.1});else{var e;if(!a.current)return;let t=r.getVelocity();null===(e=a.current)||void 0===e||e.stop(),r.set(r.get()-360),(0,p.j)(r,0,{velocity:t}),a.current=void 0}}},[t,r,i]),(0,s.jsx)(h,{...n,children:(0,s.jsx)("svg",{viewBox:"0 0 24 16",overflow:"visible",width:"20",children:(0,s.jsxs)(f.A,{transition:{duration:1,bounce:.1,type:"spring"},children:[(0,s.jsx)(l.E.g,{initial:{x:t?8:13},style:{rotateZ:r},animate:{x:t?8:13},children:(0,s.jsx)("path",{shapeRendering:"geometricPrecision",fill:"rgb(24,24,24)",fillOpacity:"1",d:" M0,0 C0,0 6.1677093505859375,15.470022201538086 6.1677093505859375,15.470022201538086 C6.1677093505859375,15.470022201538086 9.550004005432129,15.470022201538086 9.550004005432129,15.470022201538086 C9.550004005432129,15.470022201538086 3.382294178009033,0 3.382294178009033,0 C3.382294178009033,0 0,0 0,0 C0,0 0,0 0,0z"})}),(0,s.jsx)(l.E.g,{initial:"false",animate:{opacity:t?0:1,x:t?-10:0},children:(0,s.jsx)("path",{shapeRendering:"geometricPrecision",fill:"rgb(24,24,24)",fillOpacity:"1",d:" M5.824605464935303,9.348296165466309 C5.824605464935303,9.348296165466309 7.93500280380249,3.911694288253784 7.93500280380249,3.911694288253784 C7.93500280380249,3.911694288253784 10.045400619506836,9.348296165466309 10.045400619506836,9.348296165466309 C10.045400619506836,9.348296165466309 5.824605464935303,9.348296165466309 5.824605464935303,9.348296165466309 C5.824605464935303,9.348296165466309 5.824605464935303,9.348296165466309 5.824605464935303,9.348296165466309z M6.166755199432373,0 C6.166755199432373,0 0,15.470022201538086 0,15.470022201538086 C0,15.470022201538086 3.4480772018432617,15.470022201538086 3.4480772018432617,15.470022201538086 C3.4480772018432617,15.470022201538086 4.709278583526611,12.22130012512207 4.709278583526611,12.22130012512207 C4.709278583526611,12.22130012512207 11.16093635559082,12.22130012512207 11.16093635559082,12.22130012512207 C11.16093635559082,12.22130012512207 12.421928405761719,15.470022201538086 12.421928405761719,15.470022201538086 C12.421928405761719,15.470022201538086 15.87000560760498,15.470022201538086 15.87000560760498,15.470022201538086 C15.87000560760498,15.470022201538086 9.703250885009766,0 9.703250885009766,0 C9.703250885009766,0 6.166755199432373,0 6.166755199432373,0 C6.166755199432373,0 6.166755199432373,0 6.166755199432373,0z"})})]})})})}let h=(0,o.Z)(l.E.div)(_templateObject());var x=n(5718),g=n(93853),v=n(84529),b=n(72242),j=n(16793),y=n(6326),w=n(92867),C=n(90794);function Select(e){let{className:t,label:n,labelClassName:r,placeholder:a,children:i,...o}=e,l=(0,c.useId)();return(0,s.jsxs)(s.Fragment,{children:[n&&(0,s.jsx)("label",{htmlFor:l,className:(0,C.Z)("text-sm text-stone-500",r),children:n}),(0,s.jsxs)("select",{id:l,className:(0,C.Z)("bg-stone-50 border border-stone-300 text-stone-800 text-sm rounded-lg focus:ring-ant-primary focus:border-ant-primary",t),...o,children:[a&&(0,s.jsx)("option",{value:"",children:a}),i]})]})}var _=n(2056),k=n.n(_),N=n(80028);let FeedbackModal=e=>{let{conversationUuid:t,message:n,requestedFeedbackType:r,setRequestedFeedbackType:a,isOpen:i,onClose:o}=e,[l,u]=(0,c.useState)(""),{mutate:d}=(0,N.Ke)(t,n),m=(0,c.useId)();return(0,s.jsxs)(w.ZP,{isOpen:i,title:"Feedback",onClose:o,children:[(0,s.jsxs)("div",{className:"flex flex-col mt-4",children:[(null==r?void 0:r.includes("flag"))&&(0,s.jsxs)(Select,{className:"max-w-md my-2",placeholder:"Pick an option",label:"What type of issue do you wish to report? (optional)",value:r,onChange:e=>{a(e.target.value)},children:[(0,s.jsx)("option",{value:"flag/bug",children:"Bug"}),(0,s.jsx)("option",{value:"flag/harmful",children:"Harmful content"}),(0,s.jsx)("option",{value:"flag/other",children:"Other"})]}),(0,s.jsx)("label",{htmlFor:m,className:"text-sm text-stone-500 mb-2",children:"Please provide details: (optional)"}),(0,s.jsx)("textarea",{id:m,className:"p-2 rounded-md border-2 border-stone-200 text-stone-800 mb-4 focus:outline-none focus:border-stone-300 placeholder:text-sm",placeholder:(null==r?void 0:r.includes("flag"))?"What was unsatisfying about this response?":"What was satisfying about this response?",value:l,onChange:e=>{u(e.target.value)}})]}),(0,s.jsx)("p",{className:"italic text-stone-800 leading-tight",children:(0,s.jsxs)("small",{children:["Submitting this report will send the current conversation to Anthropic and store with your feedback for future improvements to our models. For more information, see our"," ",(0,s.jsx)(k(),{target:"_blank",rel:"noopener",href:"https://anthropic.com/privacy",className:"text-ant-primary font-medium hover:underline",children:"Privacy Policy"}),"."]})}),(0,s.jsxs)(w.dm,{children:[(0,s.jsx)(w.mH,{onClick:()=>{r&&(d({type:r,reason:l||void 0}),o())},children:"Submit"}),(0,s.jsx)(w.mH,{variant:"secondary",onClick:o,children:"Cancel"})]})]})};function MessageButton(e){let{Icon:t,children:n,...r}=e;return(0,s.jsxs)("button",{...r,className:"flex flex-row gap-1 items-center hover:bg-stone-200 p-1 py-0.5 rounded-md transition-opacity delay-100 text-xs",children:[t&&(0,s.jsx)(t,{size:12}),n]})}function FeedbackButtons(e){var t;let{conversationUuid:n,message:r}=e,[a,i]=(0,c.useState)(void 0),[o,l]=(0,c.useState)(!1),openModal=e=>{"flag"===e?(null==a?void 0:a.startsWith("flag"))||i("flag"):"upvote"!==a&&i("upvote"),l(!0)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(MessageButton,{onClick:()=>openModal("flag"),title:"Report issue",children:(0,s.jsx)(y.Z,{size:12,weight:(null===(t=r.chat_feedback)||void 0===t?void 0:t.type.includes("flag"))?"fill":"regular"})}),(0,s.jsx)(FeedbackModal,{conversationUuid:n,message:r,requestedFeedbackType:a,setRequestedFeedbackType:i,isOpen:o,onClose:()=>l(!1)})]})}function MessageActionBar(e){let{message:t,conversationUUID:n,isStreaming:r,onRetry:a,onStopResponse:i,isLastMessage:o}=e,l="human"===t.sender,c=r&&o,{value:d}=(0,u.useGate)("stop_button");return l?null:(0,s.jsxs)("div",{className:"flex gap-0.5 -mx-1 -mt-2 text-stone-500 justify-between items-stretch",children:[(0,s.jsx)("div",{className:"flex gap-0.5",children:c?d?(0,s.jsx)(MessageButton,{onClick:i,Icon:b.Z,children:"Stop"}):(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.h,{textToCopy:t.text,children:(0,s.jsx)(MessageButton,{Icon:v.f,children:"Copy"})}),o&&(0,s.jsx)(MessageButton,{onClick:a,Icon:j.Z,children:t.text.length>30&&"Retry"})]})}),!c&&(0,s.jsx)("div",{className:"flex gap-0.5",children:(0,s.jsx)(FeedbackButtons,{conversationUuid:n,message:t})})]})}var M=n(20112);function MessageWarning(e){let{children:t}=e;return(0,s.jsxs)("div",{className:"flex flex-row gap-4 items-center rounded-md p-2 mb-2 bg-uivory-100 text-xs text-stone-700",children:[(0,s.jsx)(M.Z,{className:"shrink-0",size:16}),(0,s.jsx)("div",{children:t})]})}function ChatMessage_templateObject(){let e=(0,r._)(["\n  flex\n  items-end\n  col-start-1\n  "]);return ChatMessage_templateObject=function(){return e},e}function _templateObject1(){let e=(0,r._)(["\n  flex\n  items-end\n  col-start-3\n  "]);return _templateObject1=function(){return e},e}function _templateObject2(){let e=(0,r._)(["\n  col-start-2\n  grid\n  gap-2\n  "]);return _templateObject2=function(){return e},e}function _templateObject3(){let e=(0,r._)(["\n  ReactMarkdown\n  rounded-xl\n  px-3\n  py-2\n  break-words\n  text-stone-900\n  transition-all\n  grid\n  gap-3\n  grid-cols-1\n  max-w-[75ch]\n  ","\n"]);return _templateObject3=function(){return e},e}function _templateObject4(){let e=(0,r._)(["\n  box-shadow: 0 0 0 0.5px rgba(0, 0, 0, 0.05), 0 0 5px rgba(0, 0, 0, 0.025),\n    0 1px 2px rgba(0, 0, 0, 0.05);\n"]);return _templateObject4=function(){return e},e}function _templateObject5(){let e=(0,r._)(["\n  place-self-end\n  flex\n  flex-wrap\n  flex-row-reverse\n  gap-2\n"]);return _templateObject5=function(){return e},e}let F={initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",damping:10,stiffness:100}};function ChatMessage(e){let t,{isInteractive:n=!0,accountName:r,potentiallySlow:o,...l}=e,{message:d,isStreaming:m}=l,p=(0,c.useRef)(!1),{account:f}=(0,a.t)(),h="human"===d.sender,v="assistant"===d.sender,b=m&&!d.text&&0===d.attachments.length,{value:j}=(0,u.useGate)("hatch_use_web_fetcher");return p.current&&(h?j||(t="Claude can't visit links. Responses may contain hallucination."):t="Links provided by Claude may not always be valid or up to date. We appreciate your patience as we work to improve link accuracy."),(0,s.jsxs)(s.Fragment,{children:[v&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(O,{...m&&F,children:(0,s.jsx)(ClaudeAvatar,{loading:b})}),o&&b?(0,s.jsx)(E,{className:"flex items-center",children:(0,s.jsx)("div",{className:"text-stone-500 text-sm pl-2",children:"Conversations with long prompts or large file uploads may take a few moments to respondâ€¦"})}):null]}),!b&&(0,s.jsxs)(E,{...m&&F,children:[d.attachments&&d.attachments.length>0&&(0,s.jsx)(A,{children:d.attachments.map((e,t)=>(0,s.jsx)(x.Z,{attachment:e,index:t},t))}),d.text&&(0,s.jsxs)(Z,{$isHuman:h,children:[(0,s.jsx)(g.s,{text:d.text,hasLinkRef:p}),t&&(0,s.jsx)(MessageWarning,{children:t}),d.text&&!h&&n&&(0,s.jsx)(MessageActionBar,{...l})]})]}),h&&(0,s.jsx)(P,{className:d.attachments&&d.attachments.length>0?"pb-[0.85rem]":"pb-1",...m&&F,children:(0,s.jsx)(i.Z,{account:r?void 0:f,name:r})})]})}let O=(0,o.Z)(l.E.div)(ChatMessage_templateObject()),P=(0,o.Z)(l.E.div)(_templateObject1()),E=(0,o.Z)(l.E.div)(_templateObject2()),Z=(0,o.Z)(l.E.div)(_templateObject3(),e=>e.$isHuman?"bg-uivory-300 place-self-end":"bg-white place-self-start").css(_templateObject4()),A=o.Z.div(_templateObject5())},93853:function(e,t,n){n.d(t,{s:function(){return MarkDown}});var r=n(27573),s=n(58355),a=n(84529),i=n(30773),o=n(2056),l=n.n(o),c=n(7653),u=n(91144),d=n(89869),m=n(60711),p=n(65759),f=n(29578),h=n(96635);function OptInImage(e){let{node:t,src:n,...s}=e,[a,o]=(0,c.useState)(!1),[u,d]=(0,c.useState)(!1);return n?(0,r.jsxs)(r.Fragment,{children:[a&&(0,r.jsx)("img",{src:n,...s,className:u?"invisible":"",onLoad:()=>d(!1),onError:()=>d(!1)}),(!a||u)&&(0,r.jsx)(l(),{href:n,onClick:e=>{e.preventDefault(),d(!0),o(!0)},className:"inline-block p-4 border border-stone-200 w-40 h-32 grid justify-items-center items-center",children:u?(0,r.jsx)(i.Z,{size:"sm"}):"Show Image"})]}):(0,r.jsx)("img",{...s})}let MarkDown=e=>{let{text:t,hasLinkRef:n}=e,a=(0,c.useMemo)(()=>(function(e){let t=(0,s.jA)(e),n=(0,p.j)().use(f.Z).parse(t);return!function makeAllListsUnspread(e){delete e.position,"list"===e.type&&(e.spread=!1),e.children.forEach(e=>{"children"in e&&makeAllListsUnspread(e)})}(n),(0,p.j)().use(f.Z).use(h.Z,{bullet:"-",fences:!0}).stringify(n)})(t),[t]),i=(0,c.useMemo)(()=>({p:e=>{let{node:t,...n}=e;return(0,r.jsx)("p",{className:"whitespace-pre-wrap",...n})},blockquote:e=>{let{node:t,...n}=e;return(0,r.jsx)("blockquote",{className:"border-l-4 border-stone-200 pl-4",...n})},li:e=>{let{node:t,ordered:n,...s}=e;return(0,r.jsx)("li",{className:"whitespace-normal",...s})},ul:e=>{let{node:t,ordered:n,...s}=e;return(0,r.jsx)("ul",{className:"list-disc pl-8 space-y-2",...s})},ol:e=>{let{node:t,ordered:n,...s}=e;return(0,r.jsx)("ol",{className:"list-decimal pl-8 space-y-2",...s})},img:OptInImage,code:CodeBlock,a(e){let{node:t,...s}=e;return n&&(n.current=!0),(0,r.jsx)("a",{...s})}}),[n]);return(0,r.jsx)(u.D,{className:"contents",remarkPlugins:[f.Z],components:i,children:a})},CodeBlock=e=>{let{inline:t,className:n,children:s}=e,i=/language-(\w+)/.exec(n||""),o=String(s).trimEnd();return t?(0,r.jsx)("code",{className:n,children:s}):(0,r.jsxs)("div",{className:"flex flex-col bg-stone-900 rounded-md",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center pt-1 pl-3",children:[(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"text-[11px] text-stone-300",children:i?i[1]:""})}),(0,r.jsx)(a.h,{textToCopy:o,children:(0,r.jsxs)("div",{className:"flex items-center pt-1 pr-3 cursor-pointer",children:[(0,r.jsx)(a.f,{size:14,className:"mr-1 text-stone-300"}),(0,r.jsx)("p",{className:"text-[11px] text-stone-300",children:"Copy code"})]})})]}),(0,r.jsx)("div",{children:(0,r.jsx)(d.Z,{language:i?i[1]:"",PreTag:"div",style:m.Z,children:o})})]})}},86211:function(e,t,n){n.d(t,{Ne:function(){return useOptimisticApiMutation},WE:function(){return useApiQuery},uC:function(){return useApiMutation}});var r=n(38348),s=n(39547),a=n(40604),i=n(61501),o=n(10040),l=n(7653),c=n(72623);function useFetch(e){let{setUpdateType:t}=(0,c.m)();return(0,l.useCallback)(async(n,a)=>{let i=await fetch(n,{...a,headers:{"anthropic-client-sha":"405ee5562c871142f58392b80c90597a313e5487","anthropic-client-version":"1",...a.headers}}),o=i.headers.get("anthropic-client-update");o&&["prompt","force"].includes(o)&&t(o);let l=await i.text(),c={error:{type:"api_error",message:l}};try{("DELETE"!==a.method||l.length>0)&&(c=JSON.parse(l))}catch(e){(0,s.uT)("Got invalid JSON from NextJS response",{extra:{text:l,status:i.status}})}if(!i.ok)throw(0,r.fT)(i.status,c,e);return c},[e,t])}let useApiMutation=(e,t,n)=>{let{transformVariables:r,enabled:s=!0,...i}=n||{},o=useFetch("Mutation error"),{mutate:c,...u}=(0,a.useMutation)({mutationFn:async n=>{let s;s="function"==typeof e?e(n):e;let a=r?r(n):n,i=await o(s,{method:t,headers:{"Content-Type":"application/json"},body:a?JSON.stringify(a):void 0});return i},...i}),d=(0,l.useCallback)(e=>{s&&c(e)},[c,s]);return{mutate:d,...u}},useApiQuery=(e,t)=>{let n=useFetch("Query error");return(0,i.useQuery)({queryKey:[e],queryFn:async()=>{let t=await n(e,{method:"GET",headers:{"Content-Type":"application/json"}});return t},retry:!1,...t})};function useOptimisticApiMutation(e,t,n,r){let s=(0,o.useQueryClient)(),{queryKey:a,...i}=r;return useApiMutation(e,t,{async onMutate(e){await s.cancelQueries({queryKey:a});let t=s.getQueryData(a);return s.setQueryData(a,t=>n(e,t)),{previousValue:t}},onError(e,t,n){(null==n?void 0:n.previousValue)&&s.setQueryData(a,n.previousValue)},...i})}},72623:function(e,t,n){n.d(t,{F:function(){return ClientUpdateProvider},m:function(){return useClientUpdate}});var r=n(27573),s=n(71036),a=n(7653);let i=(0,a.createContext)(null),o="undefined"!=typeof navigator&&"serviceWorker"in navigator,getWorkbox=()=>"workbox"in window&&o?window.workbox:null,updateWorkbox=e=>{let run=async()=>{try{await e.update()}catch(e){}};run()};function ClientUpdateProvider(e){let{children:t}=e,[n,l]=(0,a.useState)(null);(0,a.useEffect)(()=>{(0,s.yG)()&&o&&(async()=>{let e=await navigator.serviceWorker.getRegistrations();0!==e.length&&(console.warn("Found ".concat(e.length," service worker(s). This was probably from running a production build at this origin. Unregistering.")),e.forEach(e=>void e.unregister()))})()},[]),(0,a.useEffect)(()=>{let e=getWorkbox();e&&n&&((async()=>{let e=await window.caches.keys();await Promise.all(e.map(e=>caches.delete(e)))})(),updateWorkbox(e))},[n]),(0,a.useEffect)(()=>{let e=getWorkbox();if(!e)return;let t=window.setInterval(()=>{updateWorkbox(e)},36e5);return()=>{window.clearInterval(t)}},[]);let c=(0,a.useMemo)(()=>({updateType:n,setUpdateType:l}),[n]);return(0,r.jsx)(i.Provider,{value:c,children:t})}function useClientUpdate(){let e=(0,a.useContext)(i);if(!e)throw Error("Must be called from within ClientUpdateProvider");return e}},93352:function(e,t,n){n.d(t,{Pc:function(){return ConfigurationProvider},Zx:function(){return useIsClaudeDot},mX:function(){return useConfiguration}});var r=n(27573),s=n(7653);let a=(0,s.createContext)(void 0),ConfigurationProvider=e=>{let{config:t,children:n}=e;return(0,r.jsx)(a.Provider,{value:t,children:n})},useConfiguration=()=>{let e=(0,s.useContext)(a);if(!e)throw Error("useConfiguration must be called from within ConfigurationProvider");return e},useIsClaudeDot=()=>{let{applicationType:e}=useConfiguration();return"claude-dot"===e}},22809:function(e,t,n){n.d(t,{IU:function(){return useUsagePaused},Q6:function(){return CurrentAccountProvider},ZJ:function(){return useHasProSubscription},oD:function(){return useCurrentAccountQuery},t:function(){return useCurrentAccount}});var r=n(27573),s=n(71036),a=n(99865),i=n(39547),o=n(44637),l=n.n(o),c=n(32859),u=n(7653),d=n(58372),m=n(86211),p=n(93352),f=n(19981);let h="lastActiveOrg",x=(0,u.createContext)(null),CurrentAccountProvider=e=>{let{children:t}=e,[n,a]=(0,u.useState)(),{data:o,isFetching:m,refetch:g}=useCurrentAccountQuery(),v=(0,f.K)();(0,u.useEffect)(()=>{if(!(null==o?void 0:o.success))return;let e=o.account;i.av({id:e.uuid});let t="none";for(let n of["commercial_use","claude_pro","api"])if(e.memberships.some(e=>e.organization.capabilities.includes(n))){t="commercial_use";break}v.identify(o.account.uuid,{plan:t})},[o,v]);let b=(0,c.usePathname)();(0,u.useEffect)(()=>{!(0,s.yG)()&&(null==o?void 0:o.success)&&b&&v.page(b)},[b,v,o]),(0,u.useEffect)(()=>{if(n)try{window.localStorage.setItem(h,n)}catch(e){}},[n]);let j=(0,d.o)();(0,u.useEffect)(()=>{!(0,s.yG)()&&(null==o?void 0:o.success)&&j.boot({hideDefaultLauncher:!0,userId:o.account.uuid,email:o.account.email_address,name:o.account.full_name,userHash:o.intercomAccountHash})},[j,o]);let y=(0,p.Zx)(),w=(0,c.useSearchParams)(),C=w.get("organization_id"),_=(0,u.useMemo)(()=>{let e;if(!(null==o?void 0:o.success))return;let t=y?"chat":"api",r=o.account.memberships.map(e=>e.organization).filter(e=>e.capabilities.includes(t));if(n){let e=r.find(e=>e.uuid===n);if(e)return e}if(C&&(e=r.find(e=>e.uuid===C)),!e)try{let t=window.localStorage.getItem(h);e=r.find(e=>e.uuid===t)}catch(e){}return e||(e=l()(r,"name")),e&&a(e.uuid),e},[o,n,C,y]);(0,u.useEffect)(()=>{_&&j.update({customAttributes:{paidAccount:_.capabilities.includes("commercial_use"),claudePro:_.capabilities.includes("claude_pro"),orgUUID:_.uuid,orgName:_.name,orgCapabilities:_.capabilities.join(",")}})},[j,_]);let k=(0,u.useMemo)(()=>({account:(null==o?void 0:o.success)?o.account:void 0,messageLimit:(null==o?void 0:o.success)&&_?o.messageLimits[_.uuid]:void 0,activeOrganization:_,setActiveOrganizationUUID:a,isLoading:m,isLoggedOut:!m&&(null==o?void 0:o.success)===!1,refetch:async()=>{var e;let t=await g();if(null===(e=t.data)||void 0===e?void 0:e.success)return t.data.account}}),[o,_,m,g]);return(0,r.jsx)(x.Provider,{value:k,children:t})},useCurrentAccountQuery=()=>(0,m.WE)("/api/auth/current_account",{queryKey:[a.aY],staleTime:1/0}),useCurrentAccount=()=>{let e=(0,u.useContext)(x);if(!e)throw Error("Must call inside CurrentAccountProvider");return e},useHasProSubscription=()=>{let{activeOrganization:e}=useCurrentAccount();return null==e?void 0:e.capabilities.includes("claude_pro")},useUsagePaused=()=>{let{activeOrganization:e}=useCurrentAccount();return null!=e&&!!e.billable_usage_paused_until&&new Date(e.billable_usage_paused_until)>new Date}},19981:function(e,t,n){n.d(t,{K:function(){return useSegment}});var r=n(27376),s=n(93352);let a=null,useSegment=()=>{let{segmentKey:e,segmentCdnHost:t,segmentApiHost:n}=(0,s.mX)();return a||(a=r.b.load({writeKey:e,cdnURL:"https://".concat(t)},{disableClientPersistence:!0,integrations:{"Segment.io":{apiHost:"".concat(n,"/v1"),protocol:"https"}}})),a}},84529:function(e,t,n){n.d(t,{f:function(){return l},h:function(){return CopyToClipboard}});var r=n(27573),s=n(78230),a=n(18445),i=n(7653);let o=(0,i.createContext)({didCopy:!1});function CopyToClipboard(e){let{children:t,textToCopy:n}=e,[s,a]=(0,i.useState)(!1);return(0,r.jsx)(o.Provider,{value:{didCopy:s},children:(0,r.jsx)("div",{className:"contents",onClick:()=>{navigator.clipboard.writeText(n).then(()=>{a(!0),setTimeout(()=>a(!1),2e3)}).catch(e=>console.log("Something went wrong",e))},children:t})})}let l=(0,i.forwardRef)((e,t)=>{let{didCopy:n}=(0,i.useContext)(o);return n?(0,r.jsx)(s.Z,{ref:t,...e}):(0,r.jsx)(a.Z,{ref:t,...e})});l.displayName="ClickToCopy"},92867:function(e,t,n){n.d(t,{ZP:function(){return Modal},dm:function(){return ModalButtonBar},mH:function(){return ModalButton}});var r=n(58882),s=n(27573),a=n(28192),i=n(98935),o=n(61573),l=n(90794),c=n(7653),u=n(58943),d=n(1811);function _templateObject(){let e=(0,r._)(["\n  // Front of stack modal animation\n  [data-headlessui-portal] + [data-headlessui-portal]:last-child .dialog-panel--enter {\n    border-top: 1px rgba(0,0,0,0.15) solid;\n    transition-timing-function:  cubic-bezier(0.75, 0, 0, 1.15);\n    transition-duration: 500ms;\n  }\n\n  // Rear of stack modal animation\n  [data-headlessui-portal]:not(:last-child) .dialog-panel--enter {\n    background: hsl(var(--bg-bg-000) / 1);\n    transform: scale(0.95) translateY(-16px);\n    overflow: hidden;\n\n    .dialog-panel__inner {\n      opacity: 0.25;\n      filter: blur(2px);\n    }\n  }\n"]);return _templateObject=function(){return e},e}function ModalButtonBar(e){let{children:t,layout:n="right"}=e;return(0,s.jsx)("div",{className:(0,l.Z)("mt-4 gap-2 flex","left"===n&&"flex-row","center"===n&&"flex-row justify-center","right"===n&&"flex-row-reverse","between"===n&&"flex-row justify-between"),children:t})}function ModalButton(e){let{size:t="small",...n}=e;return(0,s.jsx)(d.Z,{size:t,...n})}function ModalCloseButton(e){let{onClose:t}=e;return(0,s.jsx)("button",{className:"absolute top-2 right-2 rounded-full z-20 py-2 px-2 transition-colors text-stone-400 hover:text-stone-500 hover:bg-stone-200",onClick:()=>t(),children:(0,s.jsx)(o.Z,{color:"currentColor",size:20})})}let m=(0,u.vJ)(_templateObject());function Modal(e){let{title:t,subtitle:n,isOpen:r,className:o,children:u,onClose:d,modalSize:p="md",backgroundColor:f,hasCloseButton:h=!1,theme:x="claude"}=e,g=(0,c.useRef)(null);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m,{}),(0,s.jsx)(a.u,{appear:!0,show:r,as:c.Fragment,children:(0,s.jsxs)(i.V,{as:"div",initialFocus:g,onClose:d,className:o,children:[(0,s.jsx)(a.u.Child,{as:c.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)("div",{className:"z-40 fixed inset-0 bg-black bg-opacity-25"})}),(0,s.jsx)("div",{className:"z-50 fixed inset-0 overflow-y-auto","data-theme":x,children:(0,s.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,s.jsx)(a.u.Child,{as:c.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"dialog-panel--enter opacity-100 scale-100",leave:"ease-in duration-50",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,s.jsx)(i.V.Panel,{className:(0,l.Z)("dialog-panel text-text-100 w-full transform rounded-2xl p-6 text-left align-middle shadow-xl transition-all","sm"===p&&"max-w-sm","md"===p&&"max-w-md","lg"===p&&"max-w-3xl","xl"===p&&"max-w-6xl",null!=f?f:"bg-bg-200"),children:(0,s.jsxs)("div",{className:"dialog-panel__inner transition-all",children:[h&&(0,s.jsx)(ModalCloseButton,{onClose:d}),t&&(0,s.jsx)(i.V.Title,{as:"h3",className:"text-lg font-styrene-display font-medium leading-6 mb-1 text-text-100",children:t}),n&&(0,s.jsx)("p",{className:"text-sm text-stone-500 mb-2",children:n}),(0,s.jsx)("div",{className:"flex flex-col",children:u})]})})})})})]})})]})}},38348:function(e,t,n){n.d(t,{Hx:function(){return APIError},fT:function(){return errorFromResponse}});let APIError=class APIError extends Error{constructor(e,t,n,r){super(e),this.type=t,this.statusCode=n,this.extra=r}};function errorFromResponse(e,t,n){if(t&&"object"==typeof t&&"error"in t){let n=t.error,{message:r,type:s,...a}=n;return new APIError(r,s,e,a)}return new APIError(n,"api_error",e,t||{})}},71036:function(e,t,n){n.d(t,{yG:function(){return isDevelopment}}),n(68571);let isDevelopment=()=>!1},99865:function(e,t,n){n.d(t,{BB:function(){return o},I_:function(){return i},L0:function(){return h},QU:function(){return d},RK:function(){return m},aY:function(){return s},dv:function(){return f},eW:function(){return u},mm:function(){return a},nM:function(){return r},ph:function(){return c},tv:function(){return l},xp:function(){return p}});let r="api_key_list",s="current_account",a="org",i="org_members",o="org_invites",l="chat_conversation_list",c="chat_conversation",u="account_statsig",d="subscription_details",m="invoice_list",p="workbench_list_prompts",f="workbench_get_prompt",h="workbench_list_revisions"}}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9711],{17850:function(t,e,i){i.d(e,{_:function(){return a}});let a=console},48123:function(t,e,i){i.d(e,{R:function(){return getDefaultState},m:function(){return Mutation}});var a=i(17850),r=i(96094),n=i(40466),o=i(5339);let Mutation=class Mutation extends n.F{constructor(t){super(),this.defaultOptions=t.defaultOptions,this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.logger=t.logger||a._,this.observers=[],this.state=t.state||getDefaultState(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(t){this.dispatch({type:"setState",state:t})}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.observers=this.observers.filter(e=>e!==t),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.observers.length||("loading"===this.state.status?this.scheduleGc():this.mutationCache.remove(this))}continue(){var t,e;return null!=(t=null==(e=this.retryer)?void 0:e.continue())?t:this.execute()}async execute(){var t,e,i,a,r,n,u,c,h,d,v,b,w,g,C,S,M,k,_,R;let O="loading"===this.state.status;try{if(!O){this.dispatch({type:"loading",variables:this.options.variables}),await (null==(h=(d=this.mutationCache.config).onMutate)?void 0:h.call(d,this.state.variables,this));let t=await (null==(v=(b=this.options).onMutate)?void 0:v.call(b,this.state.variables));t!==this.state.context&&this.dispatch({type:"loading",context:t,variables:this.state.variables})}let w=await (()=>{var t;return this.retryer=(0,o.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(t,e)=>{this.dispatch({type:"failed",failureCount:t,error:e})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:null!=(t=this.options.retry)?t:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise})();return await (null==(t=(e=this.mutationCache.config).onSuccess)?void 0:t.call(e,w,this.state.variables,this.state.context,this)),await (null==(i=(a=this.options).onSuccess)?void 0:i.call(a,w,this.state.variables,this.state.context)),await (null==(r=(n=this.mutationCache.config).onSettled)?void 0:r.call(n,w,null,this.state.variables,this.state.context,this)),await (null==(u=(c=this.options).onSettled)?void 0:u.call(c,w,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:w}),w}catch(t){try{throw await (null==(w=(g=this.mutationCache.config).onError)?void 0:w.call(g,t,this.state.variables,this.state.context,this)),await (null==(C=(S=this.options).onError)?void 0:C.call(S,t,this.state.variables,this.state.context)),await (null==(M=(k=this.mutationCache.config).onSettled)?void 0:M.call(k,void 0,t,this.state.variables,this.state.context,this)),await (null==(_=(R=this.options).onSettled)?void 0:_.call(R,void 0,t,this.state.variables,this.state.context)),t}finally{this.dispatch({type:"error",error:t})}}}dispatch(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"loading":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!(0,o.Kw)(this.options.networkMode),status:"loading",variables:t.variables};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"};case"setState":return{...e,...t.state}}})(this.state),r.V.batch(()=>{this.observers.forEach(e=>{e.onMutationUpdate(t)}),this.mutationCache.notify({mutation:this,type:"updated",action:t})})}};function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}},40466:function(t,e,i){i.d(e,{F:function(){return Removable}});var a=i(9163);let Removable=class Removable{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),(0,a.PN)(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(t){this.cacheTime=Math.max(this.cacheTime||0,null!=t?t:a.sk?1/0:3e5)}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}},40604:function(t,e,i){i.r(e),i.d(e,{useMutation:function(){return useMutation}});var a=i(7653),r=i(32006),n=i(9163),o=i(48123),u=i(96094),c=i(98005);let MutationObserver=class MutationObserver extends c.l{constructor(t,e){super(),this.client=t,this.setOptions(e),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;let i=this.options;this.options=this.client.defaultMutationOptions(t),(0,n.VS)(i,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(e=this.currentMutation)||e.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var t;null==(t=this.currentMutation)||t.removeObserver(this)}}onMutationUpdate(t){this.updateResult();let e={listeners:!0};"success"===t.type?e.onSuccess=!0:"error"===t.type&&(e.onError=!0),this.notify(e)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==t?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){let t=this.currentMutation?this.currentMutation.state:(0,o.R)(),e={...t,isLoading:"loading"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset};this.currentResult=e}notify(t){u.V.batch(()=>{if(this.mutateOptions&&this.hasListeners()){var e,i,a,r,n,o,u,c;t.onSuccess?(null==(e=(i=this.mutateOptions).onSuccess)||e.call(i,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(a=(r=this.mutateOptions).onSettled)||a.call(r,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)):t.onError&&(null==(n=(o=this.mutateOptions).onError)||n.call(o,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(u=(c=this.mutateOptions).onSettled)||u.call(c,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context))}t.listeners&&this.listeners.forEach(({listener:t})=>{t(this.currentResult)})})}};var h=i(10040),d=i(94037);function useMutation(t,e,i){let o=(0,n.lV)(t,e,i),c=(0,h.useQueryClient)({context:o.context}),[v]=a.useState(()=>new MutationObserver(c,o));a.useEffect(()=>{v.setOptions(o)},[v,o]);let b=(0,r.$)(a.useCallback(t=>v.subscribe(u.V.batchCalls(t)),[v]),()=>v.getCurrentResult(),()=>v.getCurrentResult()),w=a.useCallback((t,e)=>{v.mutate(t,e).catch(noop)},[v]);if(b.error&&(0,d.L)(v.options.useErrorBoundary,[b.error]))throw b.error;return{...b,mutate:w,mutateAsync:b.mutate}}function noop(){}},58372:function(t,e,i){i.d(e,{H:function(){return le},o:function(){return ue}});var a=i(7653),r=Object.defineProperty,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,W=(t,e,i)=>e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,m=(t,e)=>{for(var i in e||(e={}))o.call(e,i)&&W(t,i,e[i]);if(n)for(var i of n(e))u.call(e,i)&&W(t,i,e[i]);return t},H=(t,e)=>{var i={};for(var a in t)o.call(t,a)&&0>e.indexOf(a)&&(i[a]=t[a]);if(null!=t&&n)for(var a of n(t))0>e.indexOf(a)&&u.call(t,a)&&(i[a]=t[a]);return i},p=(t,e)=>{let i="[react-use-intercom]";switch(t){case"info":default:console.log(`${i} ${e}`);break;case"warn":console.warn(`${i} ${e}`);break;case"error":console.error(`${i} ${e}`)}},c="undefined"==typeof window,A=t=>(Object.keys(t).forEach(e=>{t[e]&&"object"==typeof t[e]?A(t[e]):void 0===t[e]&&delete t[e]}),t),s=(t,...e)=>{if(!c&&window.Intercom)return window.Intercom.apply(null,[t,...e]);p("error",`${t} Intercom instance is not initalized yet`)},h=a.createContext(void 0),J=(t,e=0)=>{var i=window,a=i.Intercom;if("function"==typeof a)a("reattach_activator"),a("update",i.intercomSettings);else{var r=document,l=function(){l.c(arguments)};l.q=[],l.c=function(t){l.q.push(t)},i.Intercom=l;var f=function(){setTimeout(function(){var e=r.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://widget.intercom.io/widget/"+t;var i=r.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i)},e)};"complete"===document.readyState?f():i.attachEvent?i.attachEvent("onload",f):i.addEventListener("load",f,!1)}},ce=t=>({custom_launcher_selector:t.customLauncherSelector,alignment:t.alignment,vertical_padding:t.verticalPadding,horizontal_padding:t.horizontalPadding,hide_default_launcher:t.hideDefaultLauncher,session_duration:t.sessionDuration,action_color:t.actionColor,background_color:t.backgroundColor}),Q=t=>m({company_id:t.companyId,name:t.name,created_at:t.createdAt,plan:t.plan,monthly_spend:t.monthlySpend,user_count:t.userCount,size:t.size,website:t.website,industry:t.industry},t.customAttributes),ie=t=>({type:t.type,image_url:t.imageUrl}),me=t=>{var e;return m({email:t.email,user_id:t.userId,created_at:t.createdAt,name:t.name,phone:t.phone,last_request_at:t.lastRequestAt,unsubscribed_from_emails:t.unsubscribedFromEmails,language_override:t.languageOverride,utm_campaign:t.utmCampaign,utm_content:t.utmContent,utm_medium:t.utmMedium,utm_source:t.utmSource,utm_term:t.utmTerm,avatar:t.avatar&&ie(t.avatar),user_hash:t.userHash,company:t.company&&Q(t.company),companies:null==(e=t.companies)?void 0:e.map(Q)},t.customAttributes)},y=t=>A(m(m({},ce(t)),me(t))),le=t=>{var{appId:e,autoBoot:i=!1,autoBootProps:r,children:n,onHide:o,onShow:u,onUnreadCountChange:d,onUserEmailSupplied:v,shouldInitialize:b=!c,apiBase:w,initializeDelay:g}=t,C=H(t,["appId","autoBoot","autoBootProps","children","onHide","onShow","onUnreadCountChange","onUserEmailSupplied","shouldInitialize","apiBase","initializeDelay"]);let S=a.useRef(!1),M=a.useRef(!1),k=Object.keys(C).filter(t=>!t.startsWith("data-"));k.length>0&&p("warn",`some invalid props were passed to IntercomProvider. Please check following props: ${k.join(", ")}.`);let _=a.useCallback(t=>{if(!window.Intercom&&!b){p("warn","Intercom instance is not initialized because `shouldInitialize` is set to `false` in `IntercomProvider`");return}let i=m(m({app_id:e},w&&{api_base:w}),t&&y(t));window.intercomSettings=i,s("boot",i),S.current=!0},[w,e,b]),[R,O]=a.useState(!1),I=a.useCallback(()=>{O(!1),o&&o()},[o,O]),x=a.useCallback(()=>{O(!0),u&&u()},[u,O]);c||!b||M.current||(J(e,g),s("onHide",I),s("onShow",x),s("onUserEmailSupplied",v),d&&s("onUnreadCountChange",d),i&&_(r),M.current=!0);let E=a.useCallback((t,e)=>{if(!window.Intercom&&!b){p("warn","Intercom instance is not initialized because `shouldInitialize` is set to `false` in `IntercomProvider`");return}if(!S.current){p("warn",`"${t}" was called but Intercom has not booted yet. Please call 'boot' before calling '${t}' or set 'autoBoot' to true in the IntercomProvider.`);return}return e()},[b]),P=a.useCallback(()=>{S.current&&(s("shutdown"),delete window.intercomSettings,S.current=!1)},[]),T=a.useCallback(()=>{S.current&&(s("shutdown"),delete window.Intercom,delete window.intercomSettings,S.current=!1)},[]),z=a.useCallback(()=>{E("update",()=>{s("update",{last_request_at:Math.floor(new Date().getTime()/1e3)})})},[E]),U=a.useCallback(t=>{E("update",()=>{if(!t){z();return}let e=y(t);window.intercomSettings=m(m({},window.intercomSettings),e),s("update",e)})},[E,z]),$=a.useCallback(()=>{E("hide",()=>{s("hide")})},[E]),j=a.useCallback(()=>{E("show",()=>s("show"))},[E]),B=a.useCallback(()=>{E("showMessages",()=>{s("showMessages")})},[E]),D=a.useCallback(t=>{E("showNewMessage",()=>{t?s("showNewMessage",t):s("showNewMessage")})},[E]),N=a.useCallback(()=>E("getVisitorId",()=>s("getVisitorId")),[E]),G=a.useCallback(t=>{E("startTour",()=>{s("startTour",t)})},[E]),V=a.useCallback((t,e)=>{E("trackEvent",()=>{e?s("trackEvent",t,e):s("trackEvent",t)})},[E]),F=a.useCallback(t=>E("showArticle",()=>{s("showArticle",t)}),[E]),L=a.useCallback(t=>E("showSpace",()=>{s("showSpace",t)}),[E]),q=a.useCallback(t=>{E("startSurvey",()=>{s("startSurvey",t)})},[E]),K=a.useMemo(()=>({boot:_,shutdown:P,hardShutdown:T,update:U,hide:$,show:j,isOpen:R,showMessages:B,showNewMessage:D,getVisitorId:N,startTour:G,trackEvent:V,showArticle:F,startSurvey:q,showSpace:L}),[_,P,T,U,$,j,R,B,D,N,G,V,F,q,L]);return a.createElement(h.Provider,{value:K},n)},X=()=>{let t=a.useContext(h);if(void 0===t)throw Error('"useIntercom" must be used within `IntercomProvider`.');return t},ue=()=>X()}}]);